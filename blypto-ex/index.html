<!DOCTYPE html>
<html>
  <head>
<meta name="description" content="Tree Layout Demo">
    <title>Tree Layout Demo</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <body>
    <script>
      var data = [
        {"name": "John",   "parent": ""},
        {"name": "Jack",  "parent": "John"},
        {"name": "Drake",  "parent": "John"},
        {"name": "Keith",  "parent": "Drake"},
        {"name": "Harry",  "parent": "Drake"},
        {"name": "Joshua",  "parent": "John"},
        {"name": "Smith",  "parent": "John"},
        {"name": "Peter", "parent": "Smith"},
        {"name": "Larry", "parent": "John"}
      ];
      
      d3.select("body")
        .append("svg")
          .attr("width", 700)
          .attr("height", 500)
          .style("border", "1px solid")
      
      var svgContainer = d3.select("svg"),
          width = +svgContainer.attr("width"),
          height = +svgContainer.attr("height");
  
      
      var tree = d3.tree()
          .size([height, width - 100]);
      
      var stratify = d3.stratify()
          .id(function(d) {return d.name;})
          .parentId(function(d) {return d.parent;});
      
      var root = stratify(data);
      console.log(tree(root).descendants());
      
      var treeG = svgContainer.append("g")
          .classed("treeG", true)
          .attr("transform", "translate(40, 0)")
      
      treeG.selectAll(".links")
        .data(tree(root).descendants().slice(1))
        .enter()
        .append("path")
        .classed("link", true)
        .attr("d", function(d) {
          return "M" + d.y + "," + d.x
            + "C" + (d.y + d.parent.y) / 2 + "," + d.x
            + " " + (d.y + d.parent.y) / 2 + "," + d.parent.x
            + " " + d.parent.y + "," + d.parent.x;
        });
      
      var nodesG = treeG.selectAll(".nodes")
        .data(root.descendants())
        .enter()
        .append("g")
          .attr("transform", function(d) {
            return "translate(" + d.y + "," + d.x + ")"
          });
      
      nodesG.append("circle")
          .attr("r", 3)
          .classed("node", true);
      
      nodesG.append("text")
        .attr("dy", 5)
        .attr("x", function(d) { return d.children ? -7 : 7; })
        .style("text-anchor", function(d) { return d.children ? "end" : "start"; })
        .text(function(d) { return d.id; });
      
    </script>
  </body>
</html>